# Linux SKWinV0 makefile
# 2024, Sphenx
# Required librairies : SDL
MAKE = make

SKWIN_EXE = skwinv0-linux
SKWIN_BUILD_FOLDER = ../build/SKWinV0_Linux_Release
CC = g++
CFLAGS = -g -W -Wall -O3
CPPFLAGS = -D__LINUX__ -I.. -Iv0 -Iv4 -Iv5 -Iv6 -I$(LUALIB_PATH)/include
CPPFLAGS  += $(shell pkg-config --cflags sdl2)
LIBS = -L.. -L$(LUALIB_LIB)
LDFLAGS += $(shell pkg-config --libs sdl2)

OBJ = $(SKWIN_0_OBJ)
OBJ_STATIC = $(LUALIB_OBJ) $(SDLLIB_OBJ)

#LUA
LUALIB_PATH = ../lua
LUALIB_H = $(LUALIB_PATH)/include/*.h
LUALIB_LIB = $(LUALIB_PATH)/lib
LUALIB_OBJ = $(LUALIB_LIB)/Lua5.1.lib

#SKWIN MINI
SKWIN_0_PATH = v0
SKWIN_0_H = $(SKWIN_0_PATH)/*.h
SKWIN_0_OBJ = $(SKWIN_0_PATH)/skmfc.o $(SKWIN_0_PATH)/skwinmfc.o $(SKWIN_0_PATH)/skcnsole.o $(SKWIN_0_PATH)/skfile.o $(SKWIN_0_PATH)/skdos.o $(SKWIN_0_PATH)/sksdl2.o $(SKWIN_0_PATH)/skvram.o $(SKWIN_0_PATH)/skwinapp.o $(SKWIN_0_PATH)/skparam.o $(SKWIN_0_PATH)/skmini.o $(SKWIN_0_PATH)/skdebug.o $(SKWIN_0_PATH)/skglobal.o $(SKWIN_0_PATH)/skrender.o


all: $(SKWIN_EXE)

$(SKWIN_EXE) : $(OBJ)
	$(CC) $(CFLAGS) $(CPPFLAGS) $(LIBS) $(OBJ) $(OBJ_STATIC) $(LDFLAGS) -o ${SKWIN_BUILD_FOLDER}/$(SKWIN_EXE)

clean: 
	rm -rf $(OBJ)
