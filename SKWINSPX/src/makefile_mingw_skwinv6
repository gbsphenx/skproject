# MinGW32 SKWinSPX makefile
# 2024-2025, Sphenx
# Required librairies : SDL, fmod, sdl_ttf, openGL, GLUT
MAKE = mingw32-make

SKWIN_EXE = skwinv6_mingw
SKWIN_BUILD_FOLDER = ../build/SkWinSPX_MinGW_Release
CC = g++
CFLAGS = -g -W -Wall -O3
CPPFLAGS = -DSKWINSPX -D__MINGW__ -D__NOSDL__ -Iv6spxmex -Iv4kj9821 -I$(LUALIB_PATH)/include -I$(MINGW_PATH) -I$(SDLLIB_PATH)/include
LIBS = -L.. -L$(LUALIB_LIB) -L$(MINGW_LIB) -L$(SDLLIB_LIB)
LDFLAGS = $(MINGW_LDFLAGS)


OBJ = $(SKWIN_X_OBJ) $(SKWIN_CORE_OBJ) $(SKWIN_WINDOW_OBJ) $(SKWIN_AUDIO_OBJ) $(SKWINXV6_OBJ)
OBJ_STATIC = $(LUALIB_OBJ) $(MINGW_OBJ) $(SDLLIB_OBJ)

#MINGW
MINGW_PATH = ../MinGW
MINGW_H = $(MINGW_PATH)/include
MINGW_LIB = $(MINGW_PATH)/lib
MINGW_OBJ = $(MINGW_LIB)/libws2_32.a
MINGW_LDFLAGS = -lws2_32

#SDL
SDLLIB_PATH = ../SDL2-2.0.8
SDLLIB_H = $(SDLLIB_PATH)/include/*.h
SDLLIB_LIB = $(SDLLIB_PATH)/lib/x86
SDLLIB_OBJ = $(SDLLIB_LIB)/SDL2.lib $(SDLLIB_LIB)/SDL2main.lib

#LUA
LUALIB_PATH = ../lua
LUALIB_H = $(LUALIB_PATH)/include/*.h
LUALIB_LIB = $(LUALIB_PATH)/lib
LUALIB_OBJ = $(LUALIB_LIB)/Lua5.1.lib

#ROOT V4
SKWIN_X_PATH = v4kj9821
SKWIN_X_H = $(SKWIN_X_PATH)/*.h
SKWIN_X_OBJ = $(SKWIN_X_PATH)/StdAfx.o $(SKWIN_X_PATH)/DME.o $(SKWIN_X_PATH)/SKDEBUG.o $(SKWIN_X_PATH)/SKGLOBAL.o $(SKWIN_X_PATH)/SKLUA.o $(SKWIN_X_PATH)/SKPARAM.o

#BASE V4
SKWIN_CORE_PATH = v4kj9821
SKWIN_CORE_H = $(SKWIN_CORE_PATH)/*.h
SKWIN_CORE_OBJ = $(SKWIN_CORE_PATH)/KCHMPION.o $(SKWIN_CORE_PATH)/KCORE.o $(SKWIN_CORE_PATH)/KCOREDUN.o $(SKWIN_CORE_PATH)/KCREATUR.o $(SKWIN_CORE_PATH)/KDUNG.o $(SKWIN_CORE_PATH)/KENVIRON.o $(SKWIN_CORE_PATH)/KEVENT.o $(SKWIN_CORE_PATH)/KFILESET.o $(SKWIN_CORE_PATH)/KGAME.o $(SKWIN_CORE_PATH)/KGDAT.o $(SKWIN_CORE_PATH)/KGFX.o $(SKWIN_CORE_PATH)/KGUIDRW.o $(SKWIN_CORE_PATH)/KITEM.o $(SKWIN_CORE_PATH)/KMOUSE.o $(SKWIN_CORE_PATH)/KSFX.o $(SKWIN_CORE_PATH)/KTEXT.o $(SKWIN_CORE_PATH)/KUI.o $(SKWIN_CORE_PATH)/KWEATHER.o


#WINDOW V4
SKWIN_WINDOW_PATH = v4kj9821
SKWIN_WINDOW_H = $(SKWIN_WINDOW_PATH)/*.h
SKWIN_WINDOW_OBJ = $(SKWIN_WINDOW_PATH)/SKWIN.o $(SKWIN_WINDOW_PATH)/SKDOS.o


#AUDIO V4
SKWIN_AUDIO_PATH = v4kj9821
SKWIN_AUDIO_H = $(SKWIN_AUDIO_PATH)/*.h
SKWIN_AUDIO_OBJ = $(SKWIN_AUDIO_PATH)/SKMIDI.o

#BASE V6
SKWINXV6_PATH = v6spxmex
SKWINXV6_H = $(SKWINXV6_PATH)/*.h
SKWINXV6_OBJ =  $(SKWINXV6_PATH)/XSTARTUP.o $(SKWINXV6_PATH)/XCORELOG.o $(SKWINXV6_PATH)/XCOREENH.o $(SKWINXV6_PATH)/XCOREDM1.o $(SKWINXV6_PATH)/XCOREEXT.o $(SKWINXV6_PATH)/XCOREBWY.o $(SKWINXV6_PATH)/XSFXSDL.o


all: $(SKWIN_EXE)

$(SKWIN_EXE) : $(OBJ)
	$(CC) $(CFLAGS) $(CPPFLAGS) $(LIBS) $(LDFLAGS) $(OBJ) $(OBJ_STATIC) -o ${SKWIN_BUILD_FOLDER}/$(SKWIN_EXE)

clean: 
	rm -rf $(OBJ)
