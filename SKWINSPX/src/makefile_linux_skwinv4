# Linux SKWinV4 makefile
# 2024, Sphenx
# Required librairies : SDL
MAKE = make

SKWIN_EXE = skwinv4-linux
SKWIN_BUILD_FOLDER = ../build/SKWinV4_Linux_Release
CC = g++
CFLAGS = -g -W -Wall -O3
CPPFLAGS = -D__LINUX__ -DSK9821V4_ -D__SDL__ -D__NO_MFC__ -I.. -Iv0 -Iv4 -Iv5 -Iv6
CPPFLAGS += $(shell pkg-config --cflags sdl2)
CPPFLAGS += $(shell pkg-config --cflags SDL2_mixer)
#LIBS = -L.. -L$(LUALIB_LIB)
LIBS = -L..
LDFLAGS += $(shell pkg-config --libs sdl2)
LDFLAGS += $(shell pkg-config --libs SDL2_mixer)

OBJ = $(SKWIN_X_OBJ) $(SKWIN_CORE_OBJ) $(SKWIN_0_OBJ) $(SKWINXV6_OBJ)
#OBJ_STATIC = $(LUALIB_OBJ) $(SDLLIB_OBJ)
OBJ_STATIC = $(SDLLIB_OBJ)

#LUA
#LUALIB_PATH = ../lua
#LUALIB_H = $(LUALIB_PATH)/include/*.h
#LUALIB_LIB = $(LUALIB_PATH)/lib
#LUALIB_OBJ = $(LUALIB_LIB)/lua5.1.lib

#BASE V0
SKWIN_0_PATH = v0
SKWIN_0_H = $(SKWIN_0_PATH)/*.h
SKWIN_0_OBJ = $(SKWIN_0_PATH)/skmfc.o $(SKWIN_0_PATH)/skwinmfc.o $(SKWIN_0_PATH)/skcnsole.o $(SKWIN_0_PATH)/skfile.o $(SKWIN_0_PATH)/skdos.o $(SKWIN_0_PATH)/sksdl2.o $(SKWIN_0_PATH)/skvram.o $(SKWIN_0_PATH)/skwinapp.o $(SKWIN_0_PATH)/skparam.o $(SKWIN_0_PATH)/skmidi.o $(SKWIN_0_PATH)/skdebug.o $(SKWIN_0_PATH)/skglobal.o $(SKWIN_0_PATH)/skrender.o

#ROOT
SKWIN_X_PATH = v4
SKWIN_X_H = $(SKWIN_X_PATH)/*.h
SKWIN_X_OBJ = $(SKWIN_X_PATH)/StdAfx.o $(SKWIN_X_PATH)/dme.o $(SKWIN_X_PATH)/sklua.o

#SKGAME V4
SKWIN_CORE_PATH = v4
SKWIN_CORE_H = $(SKWIN_CORE_PATH)/*.h
SKWIN_CORE_OBJ = $(SKWIN_CORE_PATH)/skmemcch.o $(SKWIN_CORE_PATH)/skfileop.o $(SKWIN_CORE_PATH)/skaudio.o $(SKWIN_CORE_PATH)/sksound.o $(SKWIN_CORE_PATH)/skbkgrnd.o $(SKWIN_CORE_PATH)/skbltgfx.o $(SKWIN_CORE_PATH)/skchamp.o $(SKWIN_CORE_PATH)/skcore.o $(SKWIN_CORE_PATH)/skcrture.o $(SKWIN_CORE_PATH)/skdevui.o $(SKWIN_CORE_PATH)/skdoor.o $(SKWIN_CORE_PATH)/skdungn.o $(SKWIN_CORE_PATH)/skeditdn.o $(SKWIN_CORE_PATH)/skevent.o $(SKWIN_CORE_PATH)/skgame.o $(SKWIN_CORE_PATH)/skgameui.o $(SKWIN_CORE_PATH)/skgdat.o $(SKWIN_CORE_PATH)/skguidrw.o $(SKWIN_CORE_PATH)/skibmio.o $(SKWIN_CORE_PATH)/skitem.o $(SKWIN_CORE_PATH)/sktext.o $(SKWIN_CORE_PATH)/skuievnt.o $(SKWIN_CORE_PATH)/skweathr.o


#EXTENSION
SKWINXV6_PATH = v6
SKWINXV6_H = $(SKWINXV6_PATH)/*.h
SKWINXV6_OBJ =  $(SKWINXV6_PATH)/xstartup.o $(SKWINXV6_PATH)/xcorelog.o $(SKWINXV6_PATH)/xcoreenh.o $(SKWINXV6_PATH)/xcoredm1.o $(SKWINXV6_PATH)/xcoretq.o $(SKWINXV6_PATH)/xsfxsdl.o


all: $(SKWIN_EXE)

$(SKWIN_EXE) : $(OBJ)
	$(CC) $(CFLAGS) $(CPPFLAGS) $(LIBS) $(OBJ) $(OBJ_STATIC) $(LDFLAGS) -o ${SKWIN_BUILD_FOLDER}/$(SKWIN_EXE)

clean: 
	rm -rf $(OBJ)
