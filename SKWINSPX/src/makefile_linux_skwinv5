# MinGW32 SKWin-V5 makefile
# 2024-2025, Sphenx
# Required librairies : SDL, fmod, sdl_ttf, openGL, GLUT
MAKE = mingw32-make

SKWIN_EXE = skwinv5-linux
SKWIN_BUILD_FOLDER = ../build/SKWinV5_Linux_Release
CC = g++
CFLAGS = -g -W -Wno-narrowing -O3
CPPFLAGS = -D__LINUX__ -DSKDOSV5 -D__SDL__ -D__NO_MFC__ -D__SK_NO_ALLEGRO__ -I.. -Iv0 -Iv4 -Iv5 -Iv6
CPPFLAGS  += $(shell pkg-config --cflags sdl2)
#LIBS = -L.. -L$(LUALIB_LIB)
LIBS = -L..
LDFLAGS += $(shell pkg-config --libs sdl2)

OBJ = $(SKWIN_0_OBJ) $(SKWIN_X_OBJ) $(SKWIN_X2_OBJ) $(SKWIN_CORE_OBJ) $(SKWIN_VIDEO_OBJ) $(SKWIN_WINDOW_OBJ) $(SKWIN_AUDIO_OBJ) $(SKWINXV6_OBJ)

#MINGW
#MINGW_PATH = ../MinGW
#MINGW_H = $(MINGW_PATH)/include
#MINGW_LIB = $(MINGW_PATH)/lib
#MINGW_OBJ = $(MINGW_LIB)/libws2_32.a
#MINGW_LDFLAGS = -lws2_32

#LUA
#LUALIB_PATH = ../lua
#LUALIB_H = $(LUALIB_PATH)/include/*.h
#LUALIB_LIB = $(LUALIB_PATH)/lib
#LUALIB_OBJ = $(LUALIB_LIB)/Lua5.1.lib

#BASE V0
SKWIN_0_PATH = v0
SKWIN_0_H = $(SKWIN_0_PATH)/*.h
SKWIN_0_OBJ = $(SKWIN_0_PATH)/skmfc.o $(SKWIN_0_PATH)/skwinmfc.o $(SKWIN_0_PATH)/skcnsole.o $(SKWIN_0_PATH)/skfile.o $(SKWIN_0_PATH)/skdos.o $(SKWIN_0_PATH)/sksdl2.o $(SKWIN_0_PATH)/skvram.o $(SKWIN_0_PATH)/skwinapp.o $(SKWIN_0_PATH)/skparam.o $(SKWIN_0_PATH)/skmidi.o $(SKWIN_0_PATH)/skdebug.o $(SKWIN_0_PATH)/skglobal.o $(SKWIN_0_PATH)/skrender.o


#ROOT V5
SKWIN_X_PATH = v5
SKWIN_X_H = $(SKWIN_X_PATH)/*.h
SKWIN_X_OBJ = $(SKWIN_X_PATH)/types.o $(SKWIN_X_PATH)/unref.o $(SKWIN_X_PATH)/util.o $(SKWIN_X_PATH)/xtypes.o

#SPECIAL V5
SKWIN_X_PATH = v5
SKWIN_X_H = $(SKWIN_X_PATH)/*.h
SKWIN_X2_OBJ = $(SKWIN_X_PATH)/dm2data.o $(SKWIN_X_PATH)/dm2debug.o $(SKWIN_X_PATH)/dm2globl.o $(SKWIN_X_PATH)/emu.o \
$(SKWIN_X_PATH)/fileio.o $(SKWIN_X_PATH)/ints.o $(SKWIN_X_PATH)/main.o $(SKWIN_X_PATH)/mdata.o \
$(SKWIN_X_PATH)/SK0AAF.o $(SKWIN_X_PATH)/SK1C9A.o $(SKWIN_X_PATH)/SK0350.o $(SKWIN_X_PATH)/SK1031.o $(SKWIN_X_PATH)/skaddon.o

#VIDEO V%
SKWIN_VIDEO_PATH = v5
SKWIN_VIDEO_H = $(SKWIN_VIDEO_PATH)/*.h
SKWIN_VIDEO_OBJ = $(SKWIN_VIDEO_PATH)/gfxblit.o $(SKWIN_VIDEO_PATH)/gfxbmp.o $(SKWIN_VIDEO_PATH)/gfxdec.o $(SKWIN_VIDEO_PATH)/gfxmain.o \
$(SKWIN_VIDEO_PATH)/gfxpal.o $(SKWIN_VIDEO_PATH)/gfxpixel.o $(SKWIN_VIDEO_PATH)/gfxstr.o 
##$(SKWIN_VIDEO_PATH)/SKALEGRO.o

#BASE V5
SKWIN_CORE_PATH = v5
SKWIN_CORE_H = $(SKWIN_CORE_PATH)/*.h
SKWIN_CORE_OBJ = $(SKWIN_CORE_PATH)/skai.o $(SKWIN_CORE_PATH)/skalloc.o $(SKWIN_CORE_PATH)/skalocdb.o $(SKWIN_CORE_PATH)/bcreatur.o \
$(SKWIN_CORE_PATH)/skcloud.o $(SKWIN_CORE_PATH)/skengage.o $(SKWIN_CORE_PATH)/skeventq.o $(SKWIN_CORE_PATH)/skevents.o $(SKWIN_CORE_PATH)/skgdtqdb.o \
$(SKWIN_CORE_PATH)/bgdat.o $(SKWIN_CORE_PATH)/skguidr5.o $(SKWIN_CORE_PATH)/skguivwp.o $(SKWIN_CORE_PATH)/skhero.o $(SKWIN_CORE_PATH)/skimage.o \
$(SKWIN_CORE_PATH)/sklight.o $(SKWIN_CORE_PATH)/sklodlvl.o $(SKWIN_CORE_PATH)/skmap.o $(SKWIN_CORE_PATH)/skmcursr.o $(SKWIN_CORE_PATH)/skmove.o \
$(SKWIN_CORE_PATH)/skmovrec.o $(SKWIN_CORE_PATH)/skrandom.o $(SKWIN_CORE_PATH)/skrecord.o $(SKWIN_CORE_PATH)/skrect.o $(SKWIN_CORE_PATH)/skstr.o \
$(SKWIN_CORE_PATH)/sksvgame.o $(SKWIN_CORE_PATH)/sktimer.o $(SKWIN_CORE_PATH)/sktimprc.o $(SKWIN_CORE_PATH)/skweath5.o $(SKWIN_CORE_PATH)/skxrect.o \
$(SKWIN_CORE_PATH)/uibutton.o $(SKWIN_CORE_PATH)/uiclrect.o $(SKWIN_CORE_PATH)/uidialog.o $(SKWIN_CORE_PATH)/uiinput.o $(SKWIN_CORE_PATH)/uikeybd.o \
$(SKWIN_CORE_PATH)/uitmouse.o


#WINDOW V5
SKWIN_WINDOW_PATH = v5
SKWIN_WINDOW_H = $(SKWIN_WINDOW_PATH)/*.h
SKWIN_WINDOW_OBJ = $(SKWIN_WINDOW_PATH)/dosvideo.o $(SKWIN_WINDOW_PATH)/startend.o


#AUDIO V5
SKWIN_AUDIO_PATH = v5
SKWIN_AUDIO_H = $(SKWIN_AUDIO_PATH)/*.h
SKWIN_AUDIO_OBJ = $(SKWIN_AUDIO_PATH)/sfx.o $(SKWIN_AUDIO_PATH)/sfxmidi.o $(SKWIN_AUDIO_PATH)/sfxmuwav.o $(SKWIN_AUDIO_PATH)/sfxsnd.o

#BASE V6
SKWINXV6_PATH = v6
SKWINXV6_H = $(SKWINXV6_PATH)/*.h
SKWINXV6_OBJ =  $(SKWINXV6_PATH)/xstartup.o


all: $(SKWIN_EXE)

$(SKWIN_EXE) : $(OBJ)
	$(CC) $(CFLAGS) $(CPPFLAGS) $(LIBS) $(LDFLAGS) $(OBJ) -o ${SKWIN_BUILD_FOLDER}/$(SKWIN_EXE)

clean: 
	rm -rf $(OBJ)
